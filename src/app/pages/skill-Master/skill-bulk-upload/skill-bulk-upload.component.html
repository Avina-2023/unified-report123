<div class="containerBody">
<div class="search-icon mt-3 mb-0">
    <div class="first">
        <h2 class="result mb-0">Bulk Upload <span *ngIf="tabSelect === 1">
                <h3>Bulk Upload or edit</h3>
            </span></h2>
    </div>
</div>

<div class="listPadding">
    <ng-container>
        <mat-tab-group mat-stretch-tabs class="example-stretched-tabs" (selectedTabChange)="changeTab($event)"
            [selectedIndex]="tabSelect">
            <mat-tab class="check" label="1. Instruction">
                <ng-template mat-tab-label>
                    <ng-template *ngIf="tabSelect === 0;then InstructionShow; else InstructionNotShow">
                    </ng-template>
                    <ng-template #InstructionShow>
                        <span class="blueLable"><span class="indexNumber">1 . Instruction</span></span>
                    </ng-template>
                    <ng-template #InstructionNotShow>
                        <ng-template *ngIf="tabSelect>0;then InstructionShow1; else InstructionNotShow1">
                        </ng-template>
                        <ng-template #InstructionShow1>
                            <span class="greenLable"><span class="indexNumber">1 . Instruction</span></span>
                            <img class="greenTickPadding" src="assets/images/skillMaster/greenTick.svg">
                        </ng-template>
                        <ng-template #InstructionNotShow1>
                            <span><span class="indexNumber">1 . Instruction</span></span>
                        </ng-template>
                    </ng-template>
                </ng-template>
                <div class="BulkSubTab">
                    <div class="row">
                        <div class="col-sm-8">
                            <h2 class="result">Instruction to Upload or download your data.</h2>
                            <h4 class="subInstruction">> Click on “Download template” button and open the file in excel
                                program.</h4>
                            <h4 class="subInstruction">> All fields are mandatory.</h4>
                            <h4 class="subInstruction">> From Screen, click Upload candidate details link to select a
                                file.
                            </h4>
                            <h4 class="subInstruction">> Maximum 500 users can be uploaded at one time.</h4>
                            <h4 class="subInstruction">> Please do not refresh or go back while upload is processing. >
                                Click upload button.</h4>
                            <h4 class="subInstruction">> Screen will provide a preview.</h4>
                            <h4 class="subInstruction">> Candidate details can be removed by clicking on “x” on preview
                                screen. These candidate details will not be assigned.</h4>
                            <h4 class="subInstruction">> Click on confirm button.</h4>
                        </div>
                        <div class="col-sm-4">
                            <div class="imgPadding">
                                <figure>
                                    <img src="assets/images/skillMaster/instruction.svg" alt="" />
                                </figure>
                            </div>
                        </div>
                    </div>
                    <div class="search-icon mt-3 mb-0">
                        <div class="first">
                            <h3 class="result mb-0"><b>Click on Next to continue</b></h3>
                            <div class="Row">
                                <div class="Item"><button (click)="nextTab()" class="agTable-btn-blue nextButton">
                                        <span class=""></span>
                                        <span>Next</span>
                                    </button></div>
                            </div>
                        </div>
                    </div>
                </div>
            </mat-tab>
            <mat-tab [disabled]="!instructionCheck" label="2. Upload">
                <ng-template mat-tab-label>
                    <ng-template *ngIf="tabSelect === 1;then UploadShow; else UploadNotShow">
                    </ng-template>
                    <ng-template #UploadShow>
                        <span class="blueLable"><span class="indexNumber">2 . Upload</span></span>
                    </ng-template>
                    <ng-template #UploadNotShow>
                        <ng-template *ngIf="tabSelect>1;then UploadShow1; else UploadNotShow1">
                        </ng-template>
                        <ng-template #UploadShow1>
                            <span class="greenLable"><span class="indexNumber">2 . Upload</span></span>
                            <img class="greenTickPadding" src="assets/images/skillMaster/greenTick.svg">
                        </ng-template>
                        <ng-template #UploadNotShow1>
                            <span><span class="indexNumber">2 . Upload</span></span>
                        </ng-template>
                    </ng-template>
                </ng-template>
                <div class="BulkSubTab">
                    <h2 class="result">Upload Skill</h2>
                    <h4 class="subInstruction">Download the given template to add new skills and upload the same
                        here</h4>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="centerUploadFile">
                                <mat-card class="mat-cardData">
                                    <mat-card-content class="upload-border">
                                        <input type="file" accept="text/csv, application/octet-stream, ms-excel"
                                            class="file-input" (change)="onFileSelected($event)" (click)="$event.target.value=null" #fileUpload>
                                        <div class="file-upload">
                                            <button  class="upload-btn" (click)="fileUpload.click()">
                                                <img src="assets/images/skillMaster/upload.svg">
                                                <span [matTooltip]="fileName" class="blackLable subInstruction">{{ trimFilename(fileName) || "Upload the Skills lists"}}</span>
                                            </button>
                                            <div *ngIf="fileName" class="close" (click)="cancleUpload()">
                                                <span class="pointer"><em class="icon-Close"></em></span>
                                            </div>
                                        </div>
                                    </mat-card-content>
                                    <div class="file-upload">
                                        <mat-card-actions>
                                            (<span class="redLable">*</span> File extension allowed .csv )
                                        </mat-card-actions>
                                    </div>
                                </mat-card>
                                <div *ngIf="fileName" class="search-icon">
                                    <div>
                                        <button class="agTable-btn" (click)="cancleUpload()">
                                            <span class=""></span>
                                            <span>Cancel</span>
                                        </button>
                                    </div>
                                    <div>
                                        <button class="agTable-btn-blue" (click)="openUploadModel()">
                                            <span class=""></span>
                                            <span>Upload</span>
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </div>
                        <div class="col-sm-6 downloadFile">
                            <div class="centerDownloadFile">
                                <mat-card class="mat-cardData subcard">
                                    <mat-card-content class="upload-border">
                                        <div class="file-upload">
                                            <button (click)="downloadTemplate()" class="upload-btn">
                                                <img src="assets/images/skillMaster/download.svg">
                                                <span class="blackLable subInstruction">Download Template</span>
                                            </button>
                                        </div>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="instruction">
                    <mat-accordion>
                        <mat-expansion-panel class="instructionTab" (opened)="panelOpenState = true"
                            (closed)="panelOpenState = false">
                            <mat-expansion-panel-header class="instructionTab">
                                <mat-panel-title class="instructionTab">
                                    <b>Instruction:</b>
                                </mat-panel-title>
                            </mat-expansion-panel-header>
                            <div class="BulkSubTab instructionTab">
                                <hr>
                                <div class="row">
                                    <div class="col-sm-8">
                                        <h4 class="subInstruction">> Click on “Download template” button and open the
                                            file in excel
                                            program.</h4>
                                        <h4 class="subInstruction">> All fields are mandatory.</h4>
                                        <h4 class="subInstruction">> From Screen, click Upload candidate details link to
                                            select a file.
                                        </h4>
                                        <h4 class="subInstruction">> Maximum 500 users can be uploaded at one time.</h4>
                                        <h4 class="subInstruction">> Please do not refresh or go back while upload is
                                            processing. >
                                            Click upload button.</h4>
                                        <h4 class="subInstruction">> Screen will provide a preview.</h4>
                                        <h4 class="subInstruction">> Candidate details can be removed by clicking on “x”
                                            on preview
                                            screen. These candidate details will not be assigned.</h4>
                                        <h4 class="subInstruction">> Click on confirm button.</h4>
                                    </div>
                                </div>
                            </div>
                        </mat-expansion-panel>
                    </mat-accordion>
                </div>
            </mat-tab>
            <mat-tab [disabled]="!validateCheck" label="3. Validate">
                <ng-template mat-tab-label>
                    <ng-template *ngIf="tabSelect == 2;then ValidateShow; else ValidateNotShow">
                    </ng-template>
                    <ng-template #ValidateShow>
                        <span class="blueLable"><span class="indexNumber">3 . Validate</span></span>
                    </ng-template>
                    <ng-template #ValidateNotShow>
                        <ng-template *ngIf="tabSelect>2;then ValidateShow1; else ValidateNotShow1">
                        </ng-template>
                        <ng-template #ValidateShow1>
                            <span class="greenLable"><span class="indexNumber">3 . Validate</span></span>
                            <img class="greenTickPadding" src="assets/images/skillMaster/greenTick.svg">
                        </ng-template>
                        <ng-template #ValidateNotShow1>
                            <span><span class="indexNumber">3 . Validate</span></span>
                        </ng-template>
                    </ng-template>
                </ng-template>
                <div class="BulkSubTab">
                    <h2 class="result">Upload Skill</h2>
                    <h4 class="subInstruction">Download the given template to add new skills and upload the same
                        here</h4>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="centerUploadFile">
                                <mat-card class="mat-cardData">
                                    <mat-card-content class="upload-border">
                                        <input type="file" accept="text/csv, application/octet-stream, ms-excel"
                                            class="file-input" (change)="navtostep2()" #fileUpload>
                                        <div class="file-upload">
                                            <button class="upload-btn" (click)="navtostep2()">
                                                <span [matTooltip]="fileName" class="blackLable subInstruction">{{trimFilename(fileName) || "Upload the Skills lists"}}</span>
                                            </button>
                                            <div *ngIf="fileName" class="close" (click)="navtostep2()">
                                                <span class="pointer"><em class="icon-Close"></em></span>
                                            </div>
                                        </div>
                                    </mat-card-content>
                                    <div class="file-upload">
                                        <mat-card-actions>
                                            (* File extension allowed .csv )
                                        </mat-card-actions>
                                    </div>
                                </mat-card>
                            </div>
                        </div>
                        <div class="col-sm-6 downloadFile">
                            <div class="centerDownloadFile">
                                <mat-card class="mat-cardData subcard">
                                    <mat-card-content class="upload-border">
                                        <div class="file-upload">
                                            <button (click)="downloadTemplate()" class="upload-btn">
                                                <img src="assets/images/skillMaster/download.svg">
                                                <span class="blackLable subInstruction">Download Template</span>
                                            </button>
                                        </div>
                                    </mat-card-content>
                                </mat-card>
                            </div>
                        </div>
                    </div>

                    <div class="centervalidateFile">
                        <mat-card class="instructionTab">
                            <mat-card-title>
                                <h3><b>Errors Found</b></h3>
                            </mat-card-title>
                            <mat-card-content>
                                <div class="uploadButton">
                                    <h4> <b>No.of Errors - {{totalCount}}</b></h4>
                                    <h4><b>Clear the Errors in your excel file and Re-upload the file.</b></h4>
                                    <div class="mat-elevation-z8">
                                        <table class="upload-table" mat-table [dataSource]="dataSource">

                                            <ng-container matColumnDef="Skill Name">
                                                <th class="headerTableTab" mat-header-cell *matHeaderCellDef> <b>Skill
                                                        Name</b> </th>
                                                <td class="p-24" mat-cell *matCellDef="let element"> {{element.skillName}} </td>
                                            </ng-container>

                                            <ng-container matColumnDef="Domain">
                                                <th class="headerTableTab" mat-header-cell *matHeaderCellDef>
                                                    <b>Domain</b> </th>
                                                <td mat-cell *matCellDef="let element"> {{element.domain}} </td>
                                            </ng-container>

                                            <ng-container matColumnDef="Error">
                                                <th class="headerTableTab" mat-header-cell *matHeaderCellDef>
                                                    <b>Error</b> </th>
                                                <td mat-cell *matCellDef="let element" class="redLable">
                                                    {{element.message}} </td>
                                            </ng-container>

                                            <ng-container matColumnDef="Position At">
                                                <th class="headerTableTab" mat-header-cell *matHeaderCellDef>
                                                    <b>Position At</b> </th>
                                                <td mat-cell *matCellDef="let element"> {{element.indexAt}} </td>
                                            </ng-container>

                                            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                        </table>

                                        <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons
                                            aria-label="Select page of periodic elements">
                                        </mat-paginator>
                                    </div>

                                </div>
                            </mat-card-content>
                        </mat-card>
                    </div>
                </div>
            </mat-tab>
            <mat-tab [disabled]="!updateCheck" label="4. Confirm">
                <ng-template mat-tab-label>
                    <ng-template *ngIf="tabSelect === 3;then ConfirmShow; else ConfirmNotShow">
                    </ng-template>
                    <ng-template #ConfirmShow>
                        <span class="greenLable"><span class="indexNumber">4 . Confirm</span></span>
                        <img class="greenTickPadding" src="assets/images/skillMaster/greenTick.svg">
                    </ng-template>
                    <ng-template #ConfirmNotShow>
                        <span><span class="indexNumber">4 . Confirm</span></span>
                    </ng-template>
                </ng-template>
                <div class="submitConfirm">
                    <img class="greenTickPadding" src="assets/images/skillMaster/fileuploded.svg">
                    <h3>Your File has been uploaded successfully</h3>
                    <div class="uploaddiv">
                        <div class="uploadButton">
                            <button class="agTable-btn-Upload" (click)="navtoAddSkillList()">ADD MORE SKILLS</button>
                        </div>
                        <div class="uploadButton">
                            <button class="agTable-btn-Upload1" (click)="navtoViewSkillList()">VIEW SKILL LIST</button>
                        </div>
                    </div>
                </div>
            </mat-tab>
        </mat-tab-group>
    </ng-container>
</div>

<ng-template #uploadModel>
    <div class="instruction">
        <!-- <div *ngIf="!uploadcheck" class="close" (click)="uploadModelClose()">
            <span class="pointer"><em class="icon-Close"></em></span>
        </div> -->
        <div *ngIf="!uploadcheck">
            <div class="uploadContent">
                <div class="heading">
                    <h3>Confirm to upload new skills list to database.</h3>
                </div>
                <div>
                    <h3 class="blueLable">** Make sure you have added domain names for all skills</h3>
                </div>
            </div>
            <div class="submitUpload">
                <div class="nextButton">
                    <button class="agTable-btn" (click)="uploadModelClose()">Cancel</button>
                </div>
                <div>
                    <button class="agTable-btn-confirm" (click)="saveUploadModel()">Confirm</button>
                </div>
            </div>
        </div>
        <div *ngIf="uploadcheck">
            <div class="uploadContent">
                <div>  <img class="uploadfailed" src="assets/images/skillMaster/uploadfailed.svg"></div>
                <div class="heading">
                    <h3 class="blackLable">Uploaded file contains Errors. Click on OK to view the Errors</h3>
                </div>
            </div>
            <div class="submitUpload">
                <div class="button">
                    <button class="agTable-btn-blue" (click)="uploadModelClose()">OK</button>
                </div>
            </div>
        </div>
    </div>
</ng-template>
</div>